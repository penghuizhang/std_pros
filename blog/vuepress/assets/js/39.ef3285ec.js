(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{351:function(r,e,t){"use strict";t.r(e);var s=t(28),a=Object(s.a)({},function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h1",{attrs:{id:"镜像加速器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速器","aria-hidden":"true"}},[r._v("#")]),r._v(" 镜像加速器")]),r._v(" "),t("h1",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[r._v("#")]),r._v(" 概述")]),r._v(" "),t("p",[r._v("国内从 Docker Hub 拉取镜像有时会遇到困难，此时可以配置镜像加速器。Docker 官方和国内很多云服务商都提供了国内加速器服务，例如：")]),r._v(" "),t("ul",[t("li",[t("blockquote",[t("p",[t("a",{attrs:{href:"https://docs.docker.com/registry/recipes/mirror/#use-case-the-china-registry-mirror",target:"_blank",rel:"noopener noreferrer"}},[r._v("Docker 官方提供的中国 registry mirror"),t("OutboundLink")],1)])])]),r._v(" "),t("li",[t("blockquote",[t("p",[t("a",{attrs:{href:"https://cr.console.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[r._v("阿里云加速器"),t("OutboundLink")],1)])])]),r._v(" "),t("li",[t("blockquote",[t("p",[t("a",{attrs:{href:"https://www.daocloud.io/mirror#accelerator-doc",target:"_blank",rel:"noopener noreferrer"}},[r._v("DaoCloud 加速器"),t("OutboundLink")],1)])])])]),r._v(" "),t("p",[r._v("我们以 Docker 官方加速器为例进行介绍。")]),r._v(" "),t("h2",{attrs:{id:"centos7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7","aria-hidden":"true"}},[r._v("#")]),r._v(" centos7")]),r._v(" "),t("p",[r._v("对于使用 systemd 的系统，请在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在请新建该文件）")]),r._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[r._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("[")]),r._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"https://registry.docker-cn.com"')]),r._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("]")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),r._v("\n")])])]),t("p",[r._v("注意，一定要保证该文件符合 json 规范，否则 Docker 将不能启动。")]),r._v(" "),t("p",[r._v("之后重新启动服务。")]),r._v(" "),t("div",{staticClass:"language-shell script extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[r._v("$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n")])])]),t("blockquote",[t("p",[r._v("注意：如果您之前查看旧教程，修改了 docker.service 文件内容，请去掉您添加的内容（--registry-mirror=https://registry.docker-cn.com），这里不再赘述。")])]),r._v(" "),t("p",[r._v("如果出现docker拉取镜像超时(TimeOut)拉取失败等问题，尝试切换国内镜像源\nhttps://cr.console.aliyun.com\n加速器地址\nhttps://3k1m7cym.mirror.aliyuncs.com")]),r._v(" "),t("h3",{attrs:{id:"阿里云加速器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#阿里云加速器","aria-hidden":"true"}},[r._v("#")]),r._v(" 阿里云加速器")]),r._v(" "),t("ol",[t("li",[r._v("安装／升级Docker客户端\n推荐安装1.10.0以上版本的Docker客户端，参考文档 "),t("a",{attrs:{href:"https://yq.aliyun.com/articles/110806?spm=5176.8351553.0.0.72091991RbTFJV",target:"_blank",rel:"noopener noreferrer"}},[r._v("docker-ce"),t("OutboundLink")],1)]),r._v(" "),t("li",[r._v("配置镜像加速器\n针对Docker客户端版本大于 1.10.0 的用户")])]),r._v(" "),t("p",[r._v("您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器")]),r._v(" "),t("div",{staticClass:"language-shell script extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[r._v('    sudo mkdir -p /etc/docker\n    sudo tee /etc/docker/daemon.json <<-\'EOF\'\n    {\n      "registry-mirrors": ["https://3k1m7cym.mirror.aliyuncs.com"]\n    }\n    EOF\n    sudo systemctl daemon-reload\n    sudo systemctl restart docker\n')])])]),t("ol",{attrs:{start:"3"}},[t("li",[r._v("注册阿里云账号"),t("a",{attrs:{href:"https://cr.console.aliyun.com/cn-hangzhou/instances/repositories",target:"_blank",rel:"noopener noreferrer"}},[r._v("加速器"),t("OutboundLink")],1),r._v(" "),t("ul",[t("li",[t("p",[r._v("登录实例获取临时密码或固定密码后，可通过密码登录镜像服务实例：")])]),r._v(" "),t("li",[t("p",[r._v("获取访问域名，基于当前的网络环境，选择对应的专有网络、公网或经典网络域名。")])]),r._v(" "),t("li",[t("p",[r._v("在终端中输入访问凭证，登录Registry实例")]),r._v(" "),t("div",{staticClass:"language-shell script extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[r._v("$ sudo docker login --username=<你的账号> registry.cn-hangzhou.aliyuncs.com\n")])])])])])])]),r._v(" "),t("p",[r._v("重启服务")]),r._v(" "),t("div",{staticClass:"language-shell script extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[r._v("$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n")])])]),t("p",[r._v("输入固定的密码，再次拉取镜像即可成功。")])])},[],!1,null,null,null);e.default=a.exports}}]);